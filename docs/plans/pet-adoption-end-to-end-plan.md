# K·∫ø ho·∫°ch T·ªïng th·ªÉ X√¢y d·ª±ng Website Pet Adoption üêæ

D·ª±a tr√™n s·ª± ph·ªëi h·ª£p c·ªßa c√°c k·ªπ nƒÉng trong h·ªá th·ªëng, d∆∞·ªõi ƒë√¢y l√† b·∫£n k·∫ø ho·∫°ch end-to-end chi ti·∫øt:

---

## B∆∞·ªõc 1: T∆∞ duy chi·∫øn l∆∞·ª£c (Strategic Thinking)
*(Theo h∆∞·ªõng d·∫´n t·ª´ `@brainstorming` & `@planning`)*

### C√°c t√≠nh nƒÉng ƒë·ªôt ph√°
*   **AI Matchmaking:** S·ª≠ d·ª•ng thu·∫≠t to√°n AI ph√¢n t√≠ch chi ti·∫øt h·ªì s∆° ng∆∞·ªùi d√πng (tu·ªïi t√°c, thu nh·∫≠p, gi·ªù l√†m vi·ªác, k√≠ch th∆∞·ªõc nh√†, v√† kinh nghi·ªám nu√¥i th√∫ c∆∞ng) ƒë·ªÉ gh√©p n·ªëi (match) v·ªõi nh·ªØng b√© th√∫ c∆∞ng c√≥ nhu c·∫ßu kh√¥ng gian s·ªëng, t√≠nh c√°ch t∆∞∆°ng ƒë·ªìng nh·∫•t (ƒë·ªÉ tr√°nh th√∫ c∆∞ng b·ªã tr·∫£ l·∫°i sau khi nh·∫≠n nu√¥i).
*   **B·∫£n ƒë·ªì c·ª©u tr·ª£ Real-time (Rescue Map):** T√≠ch h·ª£p b·∫£n ƒë·ªì tr·ª±c tuy·∫øn cho ph√©p c·ªông ƒë·ªìng b√°o c√°o v·ªã tr√≠, t√¨nh tr·∫°ng c·ªßa ƒë·ªông v·∫≠t ƒëi l·∫°c. Tr·∫°m c·ª©u h·ªô c√≥ th·ªÉ theo d√µi v√† ƒëi·ªÅu ph·ªëi t√¨nh nguy·ªán vi√™n g·∫ßn ƒë√≥ nh·∫•t theo th·ªùi gian th·ª±c.

### L·ªô tr√¨nh tri·ªÉn khai (Roadmap)
1.  **Giai ƒëo·∫°n 1: MVP (Th√°ng 1-2):**
    *   T√≠nh nƒÉng: Danh s√°ch th√∫ c∆∞ng ƒëang c·∫ßn t√¨m nh√†, h·ªì s∆° ng∆∞·ªùi nh·∫≠n nu√¥i c∆° b·∫£n, Form xin nh·∫≠n nu√¥i (Adoption Application), Ch·ª©c nƒÉng t√¨m ki·∫øm v√† l·ªçc c∆° b·∫£n.
    *   Stack K·ªπ thu·∫≠t: Next.js (Frontend), Laravel API (Backend), MySQL DB.
2.  **Giai ƒëo·∫°n 2: Integration & D·ªØ li·ªáu h√≥a (Th√°ng 3-4):**
    *   **Data Seeding:** Ch·∫°y Automations c√†o d·ªØ li·ªáu th√∫ c∆∞ng t·ª´ Reddit v√† c√°c b√†i ƒëƒÉng c·ª©u h·ªô (v·ªõi API ƒë√£ x·ª≠ l√Ω).
    *   **Firebase / Realtime Chat:** T√≠ch h·ª£p t√≠nh nƒÉng Chat tr·ª±c ti·∫øp b·∫±ng Firebase gi·ªØa ng∆∞·ªùi xin nh·∫≠n nu√¥i v√† t·ªï ch·ª©c c·ª©u h·ªô, nh·∫≠n th√¥ng b√°o (Push Notifications).
    *   **AI Engine:** B·∫Øt ƒë·∫ßu tri·ªÉn khai service g·ª£i √Ω (Matchmaking).
3.  **Giai ƒëo·∫°n 3: Scaling & T·ªëi ∆∞u l·ªói (Th√°ng 5-6):**
    *   **B·∫£n ƒë·ªì c·ª©u tr·ª£ Real-time:** D√πng WebSockets k·∫øt h·ª£p Firebase Realtime Database.
    *   **X·ª≠ l√Ω Thanh to√°n Quy√™n g√≥p (Donations):** T√≠ch h·ª£p Stripe/PayPal v·ªõi h·ªá th·ªëng Error Handling to√†n di·ªán theo thi·∫øt k·∫ø ·ªü B∆∞·ªõc 4.

---

## B∆∞·ªõc 2: Thi·∫øt l·∫≠p B·∫£n s·∫Øc (Brand Identity)
*(Ph√¢n t√≠ch v√† thi·∫øt l·∫≠p theo template UI/UX Case Study "PETJAM")*

*   **T√™n d·ª± √°n:** PETJAM (Website Nh·∫≠n nu√¥i Th√∫ c∆∞ng)
*   **H·ªá quy chi·∫øu Thi·∫øt k·∫ø (M√†u s·∫Øc):**
    *   `Primary Color`: **#F07C3D** (Cam s√°ng) ‚Äì T·∫°o s·ª± n·ªïi b·∫≠t, th√¢n thi·ªán, k√™u g·ªçi h√†nh ƒë·ªông (CTA).
    *   `Secondary Color`: **#0489A9** (Xanh lam ƒë·∫≠m / Teal) ‚Äì S·ª± chuy√™n nghi·ªáp, tin c·∫≠y ƒë·ªëi ph√≥ v·ªõi c√°c t√°c v·ª• ch·ª©c nƒÉng.
    *   `Dark / Text`: **#000000** (ƒêen tuy·ªÅn) ‚Äì T∆∞∆°ng ph·∫£n cao cho vƒÉn b·∫£n ch√≠nh.
    *   `Background`: **#FFFFFF** / **#F8F9FA** ‚Äì ƒê·∫£m b·∫£o phong c√°ch s·∫°ch s·∫Ω (Clean UI).
*   **Typography:**
    *   `Headings`: **Poppins** (Hi·ªán ƒë·∫°i, bo tr√≤n, t·∫°o c·∫£m gi√°c th√¢n thi·ªán v√† r√µ r√†ng).
    *   `Body Text`: **Montserrat** (thanh l·ªãch, d·ªÖ ƒë·ªçc, ph√π h·ª£p h·ªá th·ªëng l∆∞·ªõi grid th√¥ng tin m√†n h√¨nh nh·ªè/l·ªõn).
*   **Voice & Tone (Gi·ªçng ƒëi·ªáu):** Th√¢n thi·ªán, nhanh g·ªçn, ch√∫ tr·ªçng v√†o qu√° tr√¨nh nh·∫≠n nu√¥i "Simple, fast, and secure". Th√¥ng tin tr√¨nh b√†y s√∫c t√≠ch, d·ªÖ theo d√µi. Giao di·ªán tr·ª±c quan h·∫°n ch·∫ø Form d√†i d√≤ng.

---

## B∆∞·ªõc 3: Thi·∫øt k·∫ø D·ªØ li·ªáu & T·ª± ƒë·ªông h√≥a (Data & Automation)
*(Theo h∆∞·ªõng d·∫´n t·ª´ `@data-automation` & `@scraping-reddit`)*

### K·∫ø ho·∫°ch Seeding D·ªØ li·ªáu ban ƒë·∫ßu
*   S·ª≠ d·ª•ng Python (`requests`, `PRAW`) t·∫°i th∆∞ m·ª•c `scripts/` ho·∫∑c Node.js ƒë·ªÉ c√†o d·ªØ li·ªáu t·ª´ c√°c subreddits: `r/rescuecats`, `r/rescuedogs`, `r/petadoption`.
*   Tr√≠ch xu·∫•t: Ti√™u ƒë·ªÅ, h√¨nh ·∫£nh minh h·ªça b√†i vi·∫øt, n·ªôi dung t√≥m t·∫Øt c√¢u chuy·ªán c·ª©u h·ªô. Format Json, l√†m ph·∫≥ng structure (l·ªçc b·ªè ph·∫ßn th·ª´a c·ªßa API reddit).
*   L∆∞u tr·ªØ k·∫øt qu·∫£ t·∫°m th·ªùi ·ªü th∆∞ m·ª•c `resources/reddit_seed_pets.json`.

### Lu·ªìng ƒë·ªï d·ªØ li·ªáu t·ª± ƒë·ªông (Data Flow)
*   Thi·∫øt l·∫≠p **Cron Job** (tr√™n m√°y ch·ªß ho·∫∑c Laravel Scheduler) ch·∫°y m·ªói 12 ti·∫øng.
*   **Pipeline:** Scraper (Python) ‚ûú Parser (L√†m s·∫°ch data, format chu·∫©n h√≥a) ‚ûú G·ª≠i Post Request t·ªõi Laravel API Endpoint (vd: `/api/internal/seeding/pets`) ‚ûú L∆∞u v√†o MySQL.
*   C·ªôt `source_type` trong CSDL s·∫Ω ph√¢n ƒë·ªãnh gi·ªØa th√∫ c∆∞ng n·ªôi b·ªô (t·ª´ admin th√™m th·ªß c√¥ng) v√† th√∫ c∆∞ng t·ª± ƒë·ªông scrape (`reddit`), tr√°nh nh·∫ßm l·∫´n khi ng∆∞·ªùi d√πng nh·∫≠n nu√¥i th·∫≠t.

---

## B∆∞·ªõc 4: Ki·∫øn tr√∫c K·ªπ thu·∫≠t & X·ª≠ l√Ω l·ªói (Architecture & Error Handling)
*(Theo h∆∞·ªõng d·∫´n t·ª´ `@error-handling-patterns`)*

### 4.1. S∆° ƒë·ªì lu·ªìng (Flowchart)

```mermaid
graph TD
    User([Ng∆∞·ªùi d√πng / Client]) --> NextJS[Next.js Frontend]
    NextJS -- "REST API (JSON Focus)" --> Laravel[Laravel Backend API]
    NextJS -- "Realtime Websockets" --> Firebase[Firebase Services]
    Laravel --> MySQL[(MySQL Database)]
    Laravel -- "Thanh to√°n/Quy√™n g√≥p" --> Stripe[C·ªïng thanh to√°n Stripe]
    Scraper[Reddit/News Scraper] -- "Cron Job" --> Laravel
    AI_Service[AI Matchmaking Engine] --> Laravel
    Firebase -- "Chat / B·∫£n ƒë·ªì Real-time" --> User
```

### 4.2. Kh√°i qu√°t C·∫•u tr√∫c Database (ER Diagram)

```mermaid
erDiagram
    USERS {
        int id PK
        string name
        string email
        string lifestyle_quiz_answers "JSON (Ch·ª©a c√¢u tr·∫£ l·ªùi quiz AI)"
    }
    PETS {
        int id PK
        string name
        string species "Dog/Cat/Other"
        string source_type "internal/reddit"
        string personality_tags "JSON"
    }
    ADOPTION_APPLICATIONS {
        int id PK
        int user_id FK
        int pet_id FK
        string status "pending/approved/rejected"
    }
    DONATIONS {
        int id PK
        int user_id FK
        float amount
        string status "processing/completed/failed"
    }
    USERS ||--o{ ADOPTION_APPLICATIONS : "n·ªôp"
    PETS ||--o{ ADOPTION_APPLICATIONS : "nh·∫≠n"
    USERS ||--o{ DONATIONS : "quy√™n g√≥p"
```

### 4.3. Danh s√°ch API Endpoints (Laravel)

| HTTP Method | Endpoint | Use Case |
| :--- | :--- | :--- |
| `GET` | `/api/pets` | L·∫•y danh s√°ch th√∫ c∆∞ng (Pagination + Filters). |
| `POST` | `/api/pets/match` | Tr·∫£ v·ªÅ g·ª£i √Ω AI d·ª±a tr√™n object quiz ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng. |
| `POST` | `/api/adoptions` | N·ªôp ƒë∆°n nh·∫≠n nu√¥i m·ªõi. C·∫ßn x·ª≠ l√Ω Transaction. |
| `GET` | `/api/adoptions/{id}` | Xem tr·∫°ng th√°i ƒë∆°n nh·∫≠n nu√¥i c·ªßa t·∫£i kho·∫£n. |
| `POST` | `/api/donations/charge` | Thanh to√°n quy√™n g√≥p. √Åp d·ª•ng Circuit Breaker. |
| `POST` | `/api/internal/seeding` | API d√†nh ri√™ng cho Crontab t·ª± ƒë·ªông b∆°m data ƒë√£ c√†o v·ªÅ db. |

### 4.4. X·ª≠ l√Ω l·ªói (Exception Handling) chu·∫©n m·ª±c
Th·ª±c thi c√°c Error Handling Pattern sau tr√™n Backend (Laravel) c≈©ng nh∆∞ Next.js Handling:

1.  **Custom Exception Hierarchy (Laravel):**
    *   T·ª± ƒë·ªãnh nghƒ©a c√°c l·ªõp l·ªói m·ªü r·ªông t·ª´ `Exception` nh∆∞: `AdoptionValidationException`, `PaymentProcessingException`, `ExternalServiceError`.
    *   B·∫Øt t·∫°i Handler.php ƒë·ªÉ th·ªëng nh·∫•t tr·∫£ v·ªÅ JSON API Response chu·∫©n format, bao g·ªìm HTTP Code (4xx, 5xx), m√£ l·ªói n·ªôi b·ªô (Code) v√† Data chi ti·∫øt th√¥ng b√°o l·ªói th√¢n thi·ªán v·ªõi front-end.
2.  **Circuit Breaker & Exponential Backoff (C·ªïng thanh to√°n & AI):**
    *   Khi g·ªçi API Stripe ho·∫∑c AI Engine, √°p d·ª•ng Fallback. N·∫øu Stripe l·ªói m·∫°ng/Timeout qu√° 3 l·∫ßn -> M·ªü "M·∫°ch" (Open Circuit) v√† th√¥ng b√°o cho ng∆∞·ªùi d√πng s·ª± c·ªë Graceful Degradation: *"C·ªïng quy√™n g√≥p t·∫°m b·∫£o tr√¨, vui l√≤ng quay l·∫°i sau"*.
3.  **Database Transactions (To√†n v·∫πn D·ªØ li·ªáu):**
    *   ƒê∆°n **AdoptionApplication** v√† logic kh√≥a tr·∫°ng th√°i th√∫ c∆∞ng (PetStatus = Pending) ph·∫£i ƒë∆∞·ª£c g√≥i g·ªçn trong `DB::transaction()`. N·∫øu b·∫•t k·ª≥ l·ªói g√¨ xu·∫•t hi·ªán (c·∫£ l·ªói ki·ªÉm tra logic), `DB::rollBack()` s·∫Ω x·∫£ b·ªè v√† n√©m `Exception` ra tr√¨nh x·ª≠ l√Ω JSON thay v√¨ l∆∞u l·∫°i d·ªØ li·ªáu r√°c.
4.  **Aggegrate Error ·ªü Frontend (Next.js):**
    *   Trong Form nh·∫≠n nu√¥i, Next.js s·∫Ω gom to√†n b·ªô c√°c l·ªói validation logic (tr·ªëng tr∆∞·ªùng, sai format) hi·ªÉn th·ªã r√µ r√†ng cho ng∆∞·ªùi d√πng tr∆∞·ªõc khi g·ªçi API, gi·∫£m t·∫£i server.
